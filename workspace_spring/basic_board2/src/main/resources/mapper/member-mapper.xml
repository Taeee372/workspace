<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 해당 파일에 모든 쿼리문을 작성 -->
<!-- namespace에는 xml파일과 연결할 Mapper interface 파일명을 패키지를 포함하여 적어주세요 -->
<mapper namespace="com.green.basic_board2.mapper.MemberMapper">
    <!--resultMap은 통상적으로 mapper 밑에 만든다-->
    <!--resultMap : 조회된 데이터를 자바로 가져오는 정의를 생성-->
    <resultMap id="member" type="com.green.basic_board2.dto.MemberDTO">
        <!--꺽새 사이에 넣을 내용이 딱히 없기 때문에 꺽새 열자마자 닫기-->
        <id     column="MEM_ID"     property="memId"/> <!--pk컬럼은 id태그로 작성-->
        <result column="MEM_PW"     property="memPw"/> <!--실제로 연결하려는 테이블의 컬럼의 갯수만큼 result를 넣으면 된다-->
        <result column="MEM_NAME"   property="memName"/>
        <result column="MEM_AGE"    property="memAge"/>
        <result column="BIRTHDAY"   property="birthday"/>
    </resultMap>


	<!--아이디, 비번, 비번확인, 이름, 나이를 등록하는 쿼리-->
    <insert id="insertMemberInfo">
        INSERT INTO BASIC_MEMBER (
            MEM_ID
            , MEM_PW
            , MEM_NAME
            , MEM_AGE
            , BIRTHDAY
        ) VALUES (
            #{memId}
            , #{memPw}
            , #{memName}
            , #{memAge}
            , NOW()
        )
    </insert>

    <!--
     select 태그는 반드시 조회 데이터를 가져올 수 있는 자료형을 선언해줘야 함!
     자료형 선언은 resultType 속성이나 resultMap 속성 중 하나를 사용한다.

     resultType : 조회된 데이터 중 >>하나의 행<< 데이터를 가져올 수 있는 자료형
                  resultType은 자바가 기본적으로 제공하는 자료형을 사용할 때 적용!
                  ( int, String, double, List... )
     resultMap : 조회된 데이터 중 >>하나의 행<< 데이터를 가져올 수 있는 자료형
                 우리가 만든 자료형(class)으로 데이터를 받아올 때 사용!
    -->

    <!--id는 겹치면 안됨-->
    <select id="getMemberName" resultType="String">
        SELECT MEM_NAME
        FROM BASIC_MEMBER
        WHERE MEM_ID = 'java'
    </select>

    <select id="getMemberNameAll" resultType="String"> <!--조회값이 여러개 나오더라도 String[]이 아니라 String-->
        SELECT MEM_NAME
        FROM BASIC_MEMBER
    </select>

    <select id="getMemberAge" resultType="int">
        SELECT MEM_AGE
        FROM BASIC_MEMBER
        WHERE MEM_ID = 'java'
    </select>

    <select id="getMember" resultMap="member"> <!--member(이름은 자유)라는 resultMap을 스스로 만들어야 한다-->
        SELECT MEM_ID
            , MEM_PW
            , MEM_NAME
            , MEM_AGE
            , BIRTHDAY
        FROM BASIC_MEMBER
        WHERE MEM_ID = 'java'
    </select>

    <select id="getMemberAll" resultMap="member">
        SELECT MEM_ID
            , MEM_NAME
            , MEM_AGE
        FROM BASIC_MEMBER
    </select>

    <select id="getMemberAll2" resultMap="member">
        SELECT MEM_ID
            , MEM_NAME
            , MEM_AGE
        FROM BASIC_MEMBER
        WHERE MEM_AGE > #{memAge}
    </select>

</mapper>































